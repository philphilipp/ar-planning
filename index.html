<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/jeromeetienne/AR.js/2.0.1/aframe/build/aframe-ar.js"></script>
    <style>
      #overlay {
        position: fixed;
        top: 10px;
        right: 10px;
        background-color: rgba(255, 255, 255, 0.8);
        padding: 10px;
        border-radius: 5px;
        z-index: 1000;
      }
    </style>
  </head>

  <body>
    <div id="overlay">
      <div id="text-m6"></div>
      <div id="text-m4"></div>
    </div>
    <a-scene embedded vr-mode-ui="enabled: false;" arjs="debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;">
      <a-marker type="barcode" value="6" id="m6" registerevents material arjs-anchor arjs-hit-testing>
        <a-box position="0 0.5 0" material="color: red;"></a-box>
      </a-marker>
      
      <a-box position="0.07 0.1 -8.27" material="color: blue;"></a-box>

      <a-marker type="barcode" value="4" id="m4" registerevents material arjs-anchor arjs-hit-testing>
        <a-box position="0 0.5 0" material="color: green;"></a-box>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      AFRAME.registerComponent('log-world-position', {
        tick: function () {
          var marker = this.el;
          var textEl = document.querySelector('#text-' + marker.id);
          if (marker.object3D.visible) {
            var worldPosition = new THREE.Vector3();
            marker.object3D.getWorldPosition(worldPosition);
            var positionStr = 'Marker ' + marker.id + ' Position: ' + worldPosition.x.toFixed(2) + ', ' + worldPosition.y.toFixed(2) + ', ' + worldPosition.z.toFixed(2);
            textEl.innerHTML = positionStr;
          } else {
            textEl.innerHTML = '';
          }
        }
      });

      document.querySelector('#m6').setAttribute('log-world-position', '');
      document.querySelector('#m4').setAttribute('log-world-position', '');
    </script>
  </body>
</html>
